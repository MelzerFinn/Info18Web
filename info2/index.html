<html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>RoboScan</title> <link rel="stylesheet" href="reset.css"> <style> @font-face { font-family: keys; src: url(keys3.ttf); } * { box-sizing: border-box; } header { background-color: blueviolet; line-height: 40px; font-size: 20px; } span.k { font-family: keys; font-size: 40px; margin-left: 15px; display: inline-block; vertical-align: sub; cursor: pointer; } iframe { width: 100%; height: calc(100% - 40px); } </style> <script defer> document.addEventListener("DOMContentLoaded", function (event) { function dd() { document.querySelector("#dd").style = "display: block;"; document.querySelector("#ddd").style = "display: none;"; } function ddd() { document.querySelector("#ddd").style = "display: block;"; document.querySelector("#dd").style = "display: none;"; } var recording = false; document.addEventListener("keyup", function (e) { var key = e.keyCode ? e.keyCode : e.which; handleKeys(key); }, true); elems = document.getElementsByClassName("k"); for (i = 0; i < elems.length; i++) { elems[i].onclick = function () { if (this.innerHTML == "2") dd(); else if (this.innerHTML == "3") ddd(); }; } var source = new EventSource("./data.php"); source.onmessage = function (event) { console.log(recording); if(!recording) return; data = JSON.parse(event.data); document.querySelector("#dd").contentWindow.addData(data); } window.addEventListener("message", function(e) { key = e.data; handleKeys(+key); }); function handleKeys(key){ if (key == 50) dd(); //2 else if (key == 51) ddd(); //3 else if (key == 82) recording = true; //r else if (key == 83) recording = false; //s } }); </script></head> <body> <header> <span class="k">2</span> 2D <span class="k">3</span> 3D <span class="k">r</span> Record <span class="k">s</span> Stop <span class="k">x</span> </header> <iframe id="dd" src="2d.html" frameborder="0"></iframe> <!--<iframe id="ddd" src="3d.html" style="display: none;" frameborder="0">--> </iframe></body> </html>
